<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>é³¥åšå£«</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand container"  href="#">
            <h2>test</h2>
          </a>
        </div>
      </nav>

      <div class="container-fluid">
        
        <p>
          æ¸¬è©¦TEST
          <a scope="col" href="http://127.0.0.1:8000/test/" title="test">test</a>
          æ¸¬è©¦map
          <a scope="col" href="http://127.0.0.1:8000/map/" title="map">map</a>
          
          æ¸¬è©¦upload_img
          <a scope="col" href="http://127.0.0.1:8000/upload_img/" title="upload_img">upload_img</a>
        </p>

        <p>æ¸¬è©¦è·¯å¾‘ç”¨
          <a scope="col" href="http://127.0.0.1:8000/index_test/" title="index_test" >~æš«å®šé¦–é ç•«é¢~</a>
          <a scope="col" href="http://127.0.0.1:8000/birdinfo/0/" title="birdinfo">birdinfo</a>
          <p>guideç›¸é—œğŸ‘‰
            <a scope="col" href="http://127.0.0.1:8000/basicKnowledge/" title="basicKnowledge">basicKnowledge</a>
            <a scope="col" href="http://127.0.0.1:8000/development/" title="development">development</a>
            <a scope="col" href="http://127.0.0.1:8000/equipment/" title="equipment">equipment</a>
            <a scope="col" href="http://127.0.0.1:8000/ethics/" title="ethics">ethics</a>
          </p>
          <p>realtimeç›¸é—œğŸ‘‰
            <a scope="col" href="http://127.0.0.1:8000/info/" title="info">info</a>
            <a scope="col" href="http://127.0.0.1:8000/place/" title="place">place</a>
            <a scope="col" href="http://127.0.0.1:8000/recommend/" title="recommend">recommend</a>
          </p>
        </p>
      <div>
        place_data = ["è‡ºåŒ—å¸‚", "æ–°åŒ—å¸‚", "å°ä¸­å¸‚", "è‡ºå—å¸‚", "é«˜é›„å¸‚", "åŸºéš†å¸‚",
                "æ¡ƒåœ’å¸‚", "æ–°ç«¹å¸‚", "æ–°ç«¹ç¸£", "è‹—æ —ç¸£", "å½°åŒ–ç¸£", "å—æŠ•ç¸£",
                "é›²æ—ç¸£", "å˜‰ç¾©å¸‚", "å˜‰ç¾©ç¸£", "å±æ±ç¸£", "å®œè˜­ç¸£", "èŠ±è“®ç¸£",
                "å°æ±ç¸£", "æ¾æ¹–ç¸£", "é‡‘é–€ç¸£", "é€£æ±Ÿç¸£"]<br><br><br>
        weather_API<br>
        {{weather_msg.location}}
        {{weather_msg.weather_state}}
        {{weather_msg.rain_prob}}%
        {{weather_msg.comfort}}
        {{weather_msg.max_tem}}Â°C
        {{weather_msg.min_tem}}Â°C<br><br><br>
      </div>
        <div>
          <form action="." method="POST" name="distance_form">
          {% csrf_token %}
          google_API<br>è·¯ç·šè¦åŠƒ<br><br>
          <div class="mb-3">
            èµ·é»<br>
            <input type="text"  id="loc1"  name="loc1"  class="form-control" >
            <div class="mb-3">
            çµ‚é»<br>
            <input type="text"  id="loc2"  name="loc2"  class="form-control" >
            <input type="submit" name="button" id="button" class="container btn btn-primary "value="è¨ˆç®—">
          </div>
        </form>
        {% if distance_msg != "error" %}
            èµ·é»ï¼š{{distance_msg.destination_addresses}}<br>
            çµ‚é»ï¼š{{distance_msg.origin_addresses}}<br>
            è·é›¢ï¼š{{distance_msg.distance}}<br>
            é–‹è»Šæ™‚é–“ï¼š{{distance_msg.duration}}<br>
        {% endif %}
        {% if distance_msg == "error" %}
            è«‹é‡æ–°è¼¸å…¥èµ·é»å’Œçµ‚é»<br>
        {% endif %}
        </div>
        <div id="map"></div>
        <script
          src="https://maps.googleapis.com/maps/api/js?key={{google_api_key}}&callback=initMap&v=weekly"
          defer
        ></script>
        <div>
          ebird_API<br>æŠ“å°ç£åœ°å€14å¤©çš„è³‡æ–™<br><br>
          {% for item in recent_msg %}
          ç‰©ç¨®ä»£ç¢¼ speciesCode   ï¼š{{item.speciesCode}},
          é³¥å comName   ï¼š{{item.comName}},
          å­¸å sciName   ï¼š{{item.sciName}},
          åœ°é»ID locId   ï¼š{{item.locId}},
          åœ°é» locName   ï¼š{{item.locName}},
          è§€å¯Ÿæ—¥ obsDt   ï¼š{{item.obsDt}},
          æ•¸é‡ howMany   ï¼š{{item.howMany}},
          ç·¯åº¦ lat   ï¼š{{item.lat}},
          ç¶“åº¦ lng   ï¼š{{item.lng}},
          obsValid   ï¼š{{item.obsValid}},
          obsReviewed   ï¼š{{item.obsReviewed}},
          locationPrivate   ï¼š{{item.locationPrivate}},
          subId   ï¼š{{item.subId}}<br>
          {% endfor %}
        </div>
        
    <!--get browser's location-->
    <script>
      //Continuously take the position
      function initMap() {
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(
            (position) => {
              //console.log(position.coords);
              const pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude,
              };
              console.log(pos);
            },
            () => {
              handleLocationError(true);
            }
          );
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false);
        }
      }
      function handleLocationError(browserHasGeolocation) {
        if(browserHasGeolocation)
          window.alert("Error: åœ°ç†å®šä½æœå‹™å¤±æ•—ï¼Œè«‹é‡æ–°å˜—è©¦æˆ–æ˜¯ç¢ºèªç¶²è·¯æœå‹™æ˜¯å¦æˆåŠŸé€£ç·šã€‚");
        else
          window.alert( "Error: æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒå®šä½åŠŸèƒ½ï¼Œè«‹æ›æˆå…¶ä»–ç€è¦½å™¨ã€‚");
      }
      window.initMap = initMap;
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </body>
</html>